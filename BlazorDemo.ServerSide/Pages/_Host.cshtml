@page "/"
@namespace BlazorDemo.ServerSide.Pages
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@inject BlazorDemo.Services.DemoThemeService Themes
@inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor

@{
    var InitialThemeName = HttpContextAccessor.HttpContext.Request.Cookies[BlazorDemo.Services.DemoThemeService.ThemeCookieKey];
    Themes.SetActiveThemeByName(InitialThemeName);
    var bsTheme = Themes.GetBootstrapThemeCssUrl(Themes.ActiveTheme);
    var dxTheme = Themes.GetThemeCssUrl(Themes.ActiveTheme);
    var hlTheme = Themes.GetHighlightJSThemeCssUrl(Themes.ActiveTheme);
}
<!DOCTYPE html>
<title>CA Store System</title>

<html lang="en" data-bs-theme="@Themes.ActiveTheme.BootstrapThemeMode">
<head>
    <script>
        // Custom auto-disappearing alert
        window.showAutoAlert = function (message, duration = 3000) {
            // Remove any existing auto-alert
            const existing = document.querySelector('.auto-alert');
            if (existing) existing.remove();

            // Create alert container (simulating alert dialog)
            const alertDiv = document.createElement('div');
            alertDiv.className = 'auto-alert';

            // Create the modal-like alert
            alertDiv.innerHTML = `
                            <div class="alert-backdrop" style="
                                position: fixed;
                                top: 0;
                                left: 0;
                                width: 100%;
                                height: 100%;
                                background: rgba(0,0,0,0.5);
                                z-index: 99998;
                            "></div>
                            <div class="alert-content" style="
                                position: fixed;
                                top: 50%;
                                left: 50%;
                                transform: translate(-50%, -50%);
                                background: white;
                                padding: 20px;
                                border-radius: 8px;
                                box-shadow: 0 4px 20px rgba(0,0,0,0.3);
                                z-index: 99999;
                                min-width: 300px;
                                text-align: center;
                            ">
                                <p style="margin: 0 0 20px 0; font-size: 16px;">${message}</p>
                                <button onclick="this.closest('.auto-alert').remove()" style="
                                    background: #007bff;
                                    color: white;
                                    border: none;
                                    padding: 8px 16px;
                                    border-radius: 4px;
                                    cursor: pointer;
                                ">OK</button>
                            </div>
                        `;

            document.body.appendChild(alertDiv);

            // Auto remove after duration
            setTimeout(() => {
                if (alertDiv.parentNode) {
                    alertDiv.remove();
                }
            }, duration);

            return true;
        };

        // Alternative simpler version (just text, no OK button)
        window.showToastAlert = function (message, duration = 3000) {
            const alertDiv = document.createElement('div');
            alertDiv.className = 'toast-alert';
            alertDiv.textContent = message;
            alertDiv.style.cssText = `
                            position: fixed;
                            top: 50%;
                            left: 50%;
                            transform: translate(-50%, -50%);
                            background: rgba(0, 0, 0, 0.85);
                            color: white;
                            padding: 20px 30px;
                            border-radius: 8px;
                            z-index: 99999;
                            font-size: 16px;
                            text-align: center;
                            animation: fadeIn 0.3s, fadeOut 0.3s ${duration - 300}ms;
                            animation-fill-mode: forwards;
                            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
                        `;

            document.body.appendChild(alertDiv);

            setTimeout(() => {
                if (alertDiv.parentNode) alertDiv.remove();
            }, duration);

            return true;
        };
    </script>

    <style>
        @@keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        @@keyframes fadeOut {
            from {
                opacity: 1;
            }

            to {
                opacity: 0;
            }
        }
    </style>
    <script>
        // Add this to your JS file or _Host.cshtml
        window.showToast = function (message, duration = 3000) {
            // Remove any existing toast first
            const existingToast = document.querySelector('.auto-toast');
            if (existingToast) {
                existingToast.remove();
            }

            // Create new toast
            const toast = document.createElement('div');
            toast.className = 'auto-toast';
            toast.textContent = message;
            toast.style.cssText = `
                        position: fixed;
                        top: 20px;
                        right: 20px;
                        background: #4CAF50; /* Green for success */
                        color: white;
                        padding: 12px 24px;
                        border-radius: 4px;
                        z-index: 99999;
                        font-weight: 500;
                        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                        animation: toastSlideIn 0.3s ease, toastFadeOut 0.3s ease ${duration - 300}ms;
                        animation-fill-mode: forwards;
                    `;

            document.body.appendChild(toast);

            // Auto remove after duration
            setTimeout(() => {
                if (toast.parentNode) {
                    toast.remove();
                }
            }, duration);

            return true;
        };

        // Add these CSS animations to your site.css or component
    </script>
    <style>
        @@keyframes toastSlideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @@keyframes toastFadeOut {
            from {
                opacity: 1;
            }
            to {
                opacity: 0;
            }
        }
    </style>
    <script>
        window.downloadFile = function (base64Data, fileName, contentType) {
            const link = document.createElement('a');
            link.download = fileName;
            link.href = `data:${contentType};base64,${base64Data}`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        };
    </script>



    <script>







        window.downloadFileFromStream = async (fileName, contentStreamReference) => {
            const arrayBuffer = await contentStreamReference.arrayBuffer();
            const blob = new Blob([arrayBuffer]);
            const url = URL.createObjectURL(blob);
            const anchorElement = document.createElement('a');
            anchorElement.href = url;
            anchorElement.download = fileName ?? '';
            anchorElement.click();
            anchorElement.remove();
            URL.revokeObjectURL(url);
        }
    </script>
    <head>
        ...
        <!--<script src="https://cdn.syncfusion.com/blazor/<Version>/<Component script name>" type="text/javascript"></script>-->

    </head>

    <script src="~/lib/dispatch-utils.js"></script>

   
    <script src="~/sessionTimeout.js" asp-append-version="true"></script>
    <script src="https://cdn.syncfusion.com/blazor/29.2.4/sf-multiselect.min.js" type="text/javascript"></script>
    <script src="~/sessionHelper.js" asp-append-version="true"></script>
    <script src="~/lib/input-helpers.js" asp-append-version="true"></script>
    <script src="~/setTitle.js" asp-append-version="true"></script>
    <script src="~/cookieHelper.js" asp-append-version="true"></script>
    <script src="~/report-zoom.js" asp-append-version="true"></script>
    <link href="https://cdn.syncfusion.com/blazor/29.2.4/styles/bootstrap5.css" rel="stylesheet" />
    <script src="https://cdn.syncfusion.com/blazor/29.2.4/syncfusion-blazor.min.js"></script>
    <meta data-dxmetadatamanager />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/open-iconic/1.1.1/font/css/open-iconic-bootstrap.min.css" rel="stylesheet" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <base href="@Url.Content("~/")" />
    @* <link href="/css/open-iconic-bootstrap.min.css" rel="stylesheet" /> *@
    <meta property="og:url" content="https://dxpr.es/2WogLq7" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://static.devexpress.com/Products/Blazor/blazor-components-grid-pivot-scheduler-charts-editor-devexpress.jpg" />
    <meta http-equiv="Content-Security-Policy"
          content="base-uri 'self';
               default-src 'self';
               img-src data:
                       https:
                       http:
                       blob:;
               object-src 'none';
               script-src 'self'
                          'unsafe-eval'
                          https://cdn.jsdelivr.net/
                          https://www.googletagmanager.com/
                          https://*.bing.com
                          https://atlas.microsoft.com
                          https://*.virtualearth.net
                          'sha256-5IekJdLtTzD/IDYQ2FrNLbLmgyGP6WlpDJ2GbZLv+r0='
                          'sha256-3/2QOuYlxn5k9KorO7FOcY7NYI+Ui/I3n7nr0X+IWcE='
                          'sha256-CLBTNKc5dWx2th3lg9lPM2K199I5ZFDpfsv8w5I+A/E='
                          'sha256-QMkJ42L5lwKpGLZtE+0/xpz+e7/UpglECJZTgB/YlWg=';
               worker-src 'self'
                          blob:;
               frame-src 'self'
                         blob:;
               style-src 'self'
                         https://cdnjs.cloudflare.com/
                         https://fonts.googleapis.com/
                         https://*.bing.com
                         'unsafe-inline';
               font-src 'self'
                        data:
                        https://fonts.gstatic.com/
                        https://atlas.microsoft.com;
               connect-src 'self'
                        https://*.bing.com
                        https://atlas.microsoft.com
                        https://js.monitor.azure.com
                        https://dc.services.visualstudio.com/v2/track
                        https://*.virtualearth.net
                        https://public-api.devexpress.com/
                        https://js.devexpress.com/;
               block-all-mixed-content;
          ">
    @if (!string.IsNullOrEmpty(bsTheme))
    {
        <link rel="stylesheet" href="@bsTheme" asp-append-version="true" bs-theme-link />
    }
    @if (!string.IsNullOrEmpty(dxTheme))
    {
        <link rel="stylesheet" href="@dxTheme" asp-append-version="true" dx-theme-link />
    }
    @if (!string.IsNullOrEmpty(hlTheme))
    {
        <link rel="stylesheet" href="@hlTheme" asp-append-version="true" hl-theme-link />
    }
    <link rel="stylesheet" href="~/_content/BlazorDemo/css/dx-demo.css" asp-append-version="true" dx-demo-link>
    <link rel="stylesheet" href="~/_content/BlazorDemo/css/dx-demo-pages.css" asp-append-version="true">
    <link rel="stylesheet" href="~/_content/BlazorDemo/css/dx-demo-icons-fluent.css" asp-append-version="true">
    <environment include="ServerSide">
        <link rel="stylesheet" href="BlazorDemo.ServerSide.styles.css" asp-append-version="true">
        <component type="typeof(BlazorDemo.Shared.DemoThemeJsChangeDispatcher)" render-mode="Server" param-InitialThemeName="@InitialThemeName" />
        <script src="_framework/blazor.server.js" defer></script>

    </environment>
    <environment include="Wasm.AspNetCoreHosted">
        <link rel="stylesheet" href="BlazorDemo.Wasm.Server.styles.css" asp-append-version="true">
        <component type="typeof(BlazorDemo.Shared.DemoThemeJsChangeDispatcher)" render-mode="WebAssemblyPrerendered" param-InitialThemeName="@InitialThemeName" />
        <script src="_framework/blazor.webassembly.js" defer></script>


    </environment>
    <environment include="Wasm.AspNetCoreHosted">
        <style>
            body {
                margin: 0;
            }

            .loading-font {
                font-family: "Segoe UI",Roboto,"Helvetica Neue","-apple-system",BlinkMacSystemFont,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";
                font-size: .88rem;
                font-weight: 400;
                line-height: 1.5;
                text-align: left;
            }

            .loading-items-center {
                align-items: center;
                justify-content: center;
                display: flex;
            }

            .loading-border-primary {
                border-color: #bfbfbf;
            }

            .loading {
                width: 140px;
                height: 140px;
            }

            .loading-caption {
                font-size: 1.5rem;
                font-weight: 600;
            }

            .loading-border {
                border-width: 4px;
                border-style: solid;
            }

            .loading-image-wrapper {
                width: 120px;
                height: 120px;
                opacity: 0;
            }
        </style>
    </environment>
    <script>
        window.openInNewTab = function (url) {
            window.open(url, '_blank');
        };
    </script>
</head>
<body>
    @{
        var isIEOrEdgeLegacy = Request.Headers["User-Agent"].Any(userAgent => userAgent.Contains("MSIE") || userAgent.Contains("Trident"));
    }
    @if (isIEOrEdgeLegacy)
    {
        <component type="typeof(BlazorDemo.Shared.BrowserNotSupported)" render-mode="Static" />
    }
    else
    {
        <div id="app">
            <environment include="ServerSide">
                <component type="typeof(BlazorDemo.App)" render-mode="Server" />
            </environment>
            <environment include="Wasm.AspNetCoreHosted">
                <div id="applicationLoadingPanel" class="loading-items-center loading-font" style="height: 100vh; width: 100vw; background-color: #fff;">
                    <div class="loading-items-center" style="flex-direction: column">
                        <div class="loading position-relative loading-items-center" style="position: relative">
                            <div class="loading-border border-secondary" style="position: absolute; border-color: #d9d9d9; height: 100%; width: 100%; border-radius: 50%"></div>
                            <div class="spinner-border loading-boarder border-primary loading-border-primary" style="position: absolute; height: 100%; width: 100%; border-radius: 50%; border-left-color: transparent !important; border-right-color: transparent !important; border-bottom-color: transparent !important"></div>
                            <div id="loadingBackground" class="loading-image-wrapper text-white bg-primary loading-items-center" style="color: #fff; border-radius: 50%"></div>
                        </div>
                        <div class="loading-caption mt-3">DevExpress UI for Blazor</div>
                        <div class="loading-sm-text text-body mt-1" style="color: #a1a1a1">Loading...</div>
                    </div>
                </div>
            </environment>
        </div>
    }
</body>
</html>
<script>
    window.addEventListener('resize', function () {
        if (window.visualViewport) {
            document.documentElement.style.transform = 'scale(' + (1 / window.visualViewport.scale) + ')';
            document.documentElement.style.transformOrigin = '0 0';
        }
    });
</script>